<template>
  <section class="controller-posts">
    <SharedCard
      size="l"
      :img="{ src: '/posts/introduction.webp', alt: '–ü—Ä–æ—Å—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞' }"
      date="–ò—é–ª—å 15, 2025"
    >
      <template #title>–ü—Ä–∏–≤–µ—Ç!</template>
      <template #text>
        <span>
          –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–Ω–¥—Ä–µ–π. –Ø –∑–∞–Ω–∏–º–∞—é—Å—å –≤–µ–± —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 6 –ª–µ—Ç.
          –ú–æ—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞ —ç—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, —ç—Ç–æ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ
          —Å–µ—Ä–≤–∏—Å—ã. –ò –¥–∞ - —è –º–æ–≥—É –ø–∏—Å–∞—Ç—å –±—ç–∫, –Ω–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å—Ä–µ–¥–Ω–µ–≥–æ
          –º–∞—Å—à—Ç–∞–±–∞, –±–µ–∑ –∞—Ä–∫–µ—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã—Å–∫–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –ö—Å—Ç–∞—Ç–∏, –Ω–µ —Ç–∞–∫ –¥–∞–≤–Ω–æ,
          –∞ —á—É—Ç—å –º–µ–Ω–µ–µ –≥–æ–¥–∞ —è –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∞–∫—Ç–∏–∫—É—é—Å—å –∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ,
          –∏—Å–ø–æ–ª—å–∑—É—è Flutter.
          <span class="line" />
          <SharedText>
            <i>
              p.s –ß–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è, –∑–∞–¥–∞—á–∞ —Å–∞–π—Ç–∞ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å –≤–∞—Å —Å –º–æ–∏–º–∏ —Ä–∞–±–æ—Ç–∞–º–∏,
              —Ç–∞–∫ –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–≥–ª—è–¥–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –º–æ–∏–º–∏ –Ω–∞—Ä–∞–±–æ—Ç–∫–∞–º–∏ –∏ –æ—â—É—Ç–∏—Ç—å
              –Ω–∞—è–≤—É.
            </i>
          </SharedText>
        </span>
      </template>
    </SharedCard>

    <SharedCard
      :img="{ src: '/posts/how-work.webp', alt: '–ü—Ä–æ—Å—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞' }"
      date="–ò—é–ª—å 19, 2025"
    >
      <template #title>–°—Ñ–µ—Ä–∞ –º–æ–µ–π —Ä–∞–±–æ—Ç—ã</template>
      <template #text>
        <SharedList
          ref="listWork"
          class="drop__redesign"
          :items="workItems"
          :has-visible="!!interestedList[0]"
        >
          <template #default="{ item }">
            <SharedText size="m">{{ item }}</SharedText>
          </template>
        </SharedList>
      </template>
    </SharedCard>
  </section>
</template>

<script setup lang="ts">
import type { ListRoot } from '~/components/SharedList/SharedList.types'

const listWork = ref<ListRoot>()
const workItems = [
  'üåê –í–µ–± –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ª—é–±–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏',
  'ü§ñ –¢–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç',
  'üõ†Ô∏è –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å',
  '‚öôÔ∏è –ë—ç–∫–µ–Ω–¥ –Ω–∞ Node –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å—Ä–µ–¥–Ω–µ–≥–æ –º–∞—Å—à—Ç–∞–±–∞',
  'üì± –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ'
]

const { interestedList, conntect, disconnect, preCalculated } =
  useAnimationList()

onMounted(() => {
  if (!listWork.value) return
  const $work = listWork.value.listRoot

  const lists = preCalculated([$work])
  conntect(lists)
})

onUnmounted(disconnect)
</script>

<style scoped lang="scss">
.controller-posts {
  display: flex;
  flex-direction: column;
  gap: var(--gap-l);

  &:deep(ul) {
    gap: var(--gap-s);
  }
}

.line {
  display: block;
  margin: 1rem 0;
  height: 0.1rem;
  width: 100%;
  background-color: var(--dark-gray);
}
</style>
